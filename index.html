<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Academic Quiz</title>
    <style>
      body {
        font-family: "Times New Roman", Times, serif;
        background-color: #f4f4f4;
        margin: 0;
        padding: 20px;
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }
      .header {
        display: flex;
        justify-content: space-between;
        background-color: rgb(160, 238, 83);
        text-align: center;
        align-items: center;
        padding: 5px;
        box-shadow: 3px 5px 13px rgb(15, 15, 15);
        border-radius: 11px;
        margin-top: 0%;
      }
      .header h1 {
        color: #13161a;
        font-size: 26px;
        font-weight: 600;
      }
      .header img {
        width: 50px;
        height: 50px;
      }
      h1 {
        text-align: center;
        color: #2c3c54;
      }
      .quote {
        text-align: center;
        align-items: center;
        margin-top: 22px;
        padding: 2px;
        background-color: rgb(153, 151, 151);
        border-bottom: 3px solid;
        display: flex;
        justify-content: center;
        border-radius: 5px;
        box-shadow: 1px 1px 9px rgb(22, 26, 19);
      }
      .quote h2 {
        margin: 0%;
        font-size: 19px;
        font-weight: 550;
        color: rgb(37, 37, 37);
        text-align: center;
        align-items: center;
      }

      #timer {
        text-align: center;
        font-size: 1.2em;
        margin: 10px 0;
        color: #d9534f;
      }

      #question-box {
        margin: 20px 0;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
      }

      #question-text {
        font-size: 1.1em;
        margin-bottom: 15px;
      }

      #options {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
      }

      .option-btn {
        flex: 1 1 45%;
        padding: 10px;
        font-size: 1em;
        background: #2c3c54;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background 0.3s;
      }

      .option-btn:hover {
        background: #3a506b;
      }

      .option-btn:disabled {
        background: #ccc;
        cursor: not-allowed;
      }

      .option-btn.selected {
        background: #28a745;
      }

      #navigation {
        display: flex;
        justify-content: space-between;
        margin-top: 20px;
      }
      .test-btn {
        display: flex;
        gap: 30px;
        float: inline-start;
      }
      #prev-btn,
      #next-btn,
      #submit-btn {
        padding: 10px 20px;
        font-size: 1em;
        background: #2c3c54;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }

      #prev-btn:disabled,
      #next-btn:disabled,
      #submit-btn:disabled {
        background: #ccc;
        cursor: not-allowed;
      }

      #result-box {
        text-align: center;
        margin-top: 20px;
      }

      #score-text,
      #feedback-text {
        font-size: 1.2em;
        margin: 10px 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <img src="icon.png" alt="" />
        <h1>
          Mock Test for Mehran University of Engineering and Technology Jamshoro
          Computer-Based Entry Test
        </h1>
      </div>
      <div class="quote">
        <h2>
          "Crack the Code to MUET Admission Smart Testing for Smart Minds"
        </h2>
      </div>
      <div id="timer">Time Remaining: 60:00</div>
      <div id="question-box">
        <p id="question-text">question loading..</p>
        <div id="options">
          <button class="option-btn" data-option="A">A</button>
          <button class="option-btn" data-option="B">B</button>
          <button class="option-btn" data-option="C">C</button>
          <button class="option-btn" data-option="D">D</button>
        </div>
      </div>
      <div id="navigation">
        <div class="test-btn">
          <button id="prev-btn" disabled>Previous</button>
          <button id="next-btn">Next</button>
        </div>
        <button id="submit-btn">Submit Test</button>
      </div>
      <div id="result-box" style="display: none">
        <h2>Your Results</h2>
        <p id="score-text"></p>
        <p id="feedback-text"></p>
      </div>
    </div>

    <script>
      let questions = [];
      let currentQuestionIndex = 0;
      let score = 0;
      let timeLeft = 3600; // 60 minutes in seconds
      let timerInterval;
      let userAnswers = []; // Array to store user answers

      // Load questions
      function loadQuestions() {
        try {
          questions = [
            {
              question: "The value of tan60‚ó¶ is:",
              options: { A: "1/‚àö3", B: "‚àö3", C: "1/2", D: "1" },
              answer: "B",
            },
            {
              question:
                "If cosŒ∏ = 5/13 and Œ∏ is in the first quadrant, then sinŒ∏ =:",
              options: { A: "12/13", B: "5/12", C: "13/12", D: "12/5" },
              answer: "A",
            },
            {
              question:
                "The solution to the system 3x + 2y = 12 and x ‚àí y = 1 is:",
              options: { A: "(2,1)", B: "(1,2)", C: "(3,1)", D: "(2,3)" },
              answer: "A",
            },
            {
              question:
                "The number of permutations of 4 distinct objects taken 2 at a time is:",
              options: { A: "6", B: "12", C: "16", D: "24" },
              answer: "B",
            },
            {
              question:
                "The 5th term of the geometric sequence with first term 2 and common ratio 3 is:",
              options: { A: "54", B: "162", C: "486", D: "18" },
              answer: "B",
            },
            {
              question: "If z = 3 ‚àí 4i, then |z| =:",
              options: { A: "5", B: "7", C: "9", D: "12" },
              answer: "A",
            },
            {
              question:
                "The equation of the line parallel to y = ‚àí3x + 4 and passing through (1,2) is:",
              options: {
                A: "y = ‚àí3x + 5",
                B: "y = ‚àí3x + 2",
                C: "y = 3x ‚àí 1",
                D: "y = ‚àí3x + 1",
              },
              answer: "A",
            },
            {
              question: "If log5 25 = x, then x =:",
              options: { A: "1", B: "2", C: "3", D: "4" },
              answer: "B",
            },
            {
              question: "The derivative of sin(2x) with respect to x is:",
              options: {
                A: "2cos(2x)",
                B: "cos(2x)",
                C: "2sin(2x)",
                D: "‚àícos(2x)",
              },
              answer: "A",
            },
            {
              question:
                "The probability of drawing a red card from a standard deck of 52 cards is:",
              options: { A: "1/4", B: "1/2", C: "1/3", D: "2/3" },
              answer: "A",
            },
            {
              question: "If A = {1,3,5} and B = {2,3,4}, then A ‚àí B =:",
              options: { A: "{1,5}", B: "{3}", C: "{2,4}", D: "‚àÖ" },
              answer: "A",
            },
            {
              question: "The focus of the parabola y^2 = 8x is:",
              options: { A: "(2,0)", B: "(0,2)", C: "(4,0)", D: "(0,4)" },
              answer: "A",
            },
            {
              question: "The value of sin‚àí1(1) is:",
              options: { A: "œÄ/6", B: "œÄ/4", C: "œÄ/3", D: "œÄ/2" },
              answer: "D",
            },
            {
              question: "If f(x) = 3x ‚àí 2, then f‚àí1(x) =:",
              options: {
                A: "(x + 2)/3",
                B: "(x ‚àí 2)/3",
                C: "3x + 2",
                D: "3/(x + 2)",
              },
              answer: "A",
            },
            {
              question:
                "The sum of an infinite geometric series with first term 4 and common ratio 1/2 is:",
              options: { A: "6", B: "8", C: "12", D: "16" },
              answer: "B",
            },
            {
              question: "If tan2Œ∏ = 1, then Œ∏ = (in first quadrant):",
              options: { A: "30‚ó¶", B: "45‚ó¶", C: "60‚ó¶", D: "90‚ó¶" },
              answer: "B",
            },
            {
              question: "The number of solutions to x^2 ‚àí 5x + 6 = 0 is:",
              options: { A: "0", B: "1", C: "2", D: "3" },
              answer: "C",
            },
            {
              question: "The magnitude of the vector (‚àí3,4) is:",
              options: { A: "5", B: "7", C: "9", D: "12" },
              answer: "A",
            },
            {
              question: "If 3x = 9, then x =:",
              options: { A: "1", B: "2", C: "3", D: "4" },
              answer: "B",
            },
            {
              question: "The angle between vectors (1,1) and (1,‚àí1) is:",
              options: { A: "30‚ó¶", B: "45‚ó¶", C: "90‚ó¶", D: "180‚ó¶" },
              answer: "C",
            },
            {
              question:
                "The perimeter of a rectangle with length 10 cm and width 6 cm is:",
              options: { A: "16 cm", B: "32 cm", C: "60 cm", D: "80 cm" },
              answer: "B",
            },
            {
              question: "The integral ‚à´(2x^2 + 1)dx is:",
              options: {
                A: "(2x^3)/3 + x + C",
                B: "(x^3)/3 + x + C",
                C: "2x^3 + x + C",
                D: "(2x^2)/3 + x + C",
              },
              answer: "A",
            },
            {
              question: "The mode of the data set 3,5,5,7,9 is:",
              options: { A: "3", B: "5", C: "7", D: "9" },
              answer: "B",
            },
            {
              question: "If A = [[4,1],[2,3]], then adj(A) =:",
              options: {
                A: "[[3,-1],[-2,4]]",
                B: "[[4,-1],[-2,3]]",
                C: "[[3,1],[2,4]]",
                D: "[[4,1],[2,3]]",
              },
              answer: "A",
            },
            {
              question:
                "The sum of the first 5 terms of the sequence 1,4,9,16,... is:",
              options: { A: "45", B: "55", C: "65", D: "75" },
              answer: "B",
            },
            {
              question: "The SI unit of torque is:",
              options: { A: "N¬∑m", B: "Joule", C: "Watt", D: "N/m" },
              answer: "A",
            },
            {
              question: "The uncertainty principle is associated with:",
              options: {
                A: "Newton",
                B: "Einstein",
                C: "Heisenberg",
                D: "Bohr",
              },
              answer: "C",
            },
            {
              question: "The angular momentum of a particle is given by:",
              options: { A: "mvr", B: "mv/r", C: "mv^2r", D: "mvr^2" },
              answer: "A",
            },
            {
              question: "The dimensional formula of pressure is:",
              options: {
                A: "ML^‚àí1T^‚àí2",
                B: "MLT^‚àí2",
                C: "ML^2T^‚àí2",
                D: "M^‚àí1LT^‚àí2",
              },
              answer: "A",
            },
            {
              question:
                "The time period of a simple pendulum is proportional to:",
              options: {
                A: "Mass of bob",
                B: "‚àölength",
                C: "Amplitude",
                D: "Gravity",
              },
              answer: "B",
            },
            {
              question: "The critical angle depends on:",
              options: {
                A: "Wavelength",
                B: "Refractive index",
                C: "Temperature",
                D: "All of These",
              },
              answer: "D",
            },
            {
              question: "The SI unit of magnetic flux is:",
              options: { A: "Tesla", B: "Weber", C: "Henry", D: "Ampere" },
              answer: "B",
            },
            {
              question:
                "The terminal velocity of a falling object occurs when:",
              options: {
                A: "Acceleration is maximum",
                B: "Net force is zero",
                C: "Velocity is zero",
                D: "Drag force is zero",
              },
              answer: "B",
            },
            {
              question: "The formula for capacitance is:",
              options: { A: "Q/V", B: "V/Q", C: "QV", D: "Q^2/V" },
              answer: "A",
            },
            {
              question: "The frequency of a wave is:",
              options: {
                A: "Number of waves per second",
                B: "Distance between waves",
                C: "Height of wave",
                D: "Speed of wave",
              },
              answer: "A",
            },
            {
              question: "The energy of a photon is given by:",
              options: {
                A: "E = mc^2",
                B: "E = hf",
                C: "E = hc/Œª",
                D: "Both B and C",
              },
              answer: "D",
            },
            {
              question: "The unit of specific heat capacity is:",
              options: { A: "J/kg¬∑K", B: "J/K", C: "W/m¬∑K", D: "J/m^2" },
              answer: "A",
            },
            {
              question:
                "The potential difference across a resistor is measured by:",
              options: {
                A: "Ammeter",
                B: "Voltmeter",
                C: "Galvanometer",
                D: "Ohmmeter",
              },
              answer: "B",
            },
            {
              question: "The binding energy of a nucleus is:",
              options: {
                A: "Energy to split nucleus",
                B: "Energy to form nucleus",
                C: "Energy of protons",
                D: "Energy of neutrons",
              },
              answer: "A",
            },
            {
              question: "The formula for centripetal force is:",
              options: { A: "mv^2/r", B: "mv^2r", C: "mv/r", D: "mvr" },
              answer: "A",
            },
            {
              question: "The polarization of light proves its:",
              options: {
                A: "Particle nature",
                B: "Wave nature",
                C: "Dual nature",
                D: "Quantum nature",
              },
              answer: "B",
            },
            {
              question: "The Heisenberg uncertainty principle applies to:",
              options: {
                A: "Position and momentum",
                B: "Energy and time",
                C: "Both A and B",
                D: "Velocity and mass",
              },
              answer: "C",
            },
            {
              question:
                "The work done by a gas during isothermal expansion depends on:",
              options: {
                A: "Pressure",
                B: "Volume change",
                C: "Temperature",
                D: "All of These",
              },
              answer: "D",
            },
            {
              question:
                "The magnetic field due to a current-carrying wire is given by:",
              options: {
                A: "¬µ0I/(2œÄr)",
                B: "¬µ0I/(2r)",
                C: "¬µ0I/(œÄr)",
                D: "¬µ0I/r",
              },
              answer: "A",
            },
            {
              question: "The formula for electrical power is:",
              options: { A: "V^2/R", B: "I^2R", C: "VI", D: "All of These" },
              answer: "D",
            },
            {
              question: "The principle of superposition applies to:",
              options: {
                A: "Waves",
                B: "Particles",
                C: "Charges",
                D: "Magnets",
              },
              answer: "A",
            },
            {
              question: "The speed of electromagnetic waves in vacuum is:",
              options: {
                A: "3√ó10^6 m/s",
                B: "3√ó10^8 m/s",
                C: "3√ó10^10 m/s",
                D: "3√ó10^4 m/s",
              },
              answer: "B",
            },
            {
              question: "The third law of thermodynamics states that entropy:",
              options: {
                A: "Increases with temperature",
                B: "Approaches zero at absolute zero",
                C: "Is constant",
                D: "Is infinite",
              },
              answer: "B",
            },
            {
              question: "The chromatic aberration in lenses is due to:",
              options: {
                A: "Reflection",
                B: "Dispersion",
                C: "Interference",
                D: "Diffraction",
              },
              answer: "B",
            },
            {
              question: "The unit of angular velocity is:",
              options: { A: "rad/s", B: "m/s", C: "rad/s^2", D: "m/s^2" },
              answer: "A",
            },
            {
              question: "The chemical symbol for potassium is:",
              options: { A: "P", B: "K", C: "Pt", D: "Po" },
              answer: "B",
            },
            {
              question: "The number of protons in Mg^2+ ion is:",
              options: { A: "10", B: "12", C: "14", D: "24" },
              answer: "B",
            },
            {
              question: "The number of electrons in F^‚àí ion is:",
              options: { A: "8", B: "9", C: "10", D: "11" },
              answer: "C",
            },
            {
              question: "The bond in NH4^+ ion is:",
              options: {
                A: "Ionic",
                B: "Covalent",
                C: "Coordinate",
                D: "Metallic",
              },
              answer: "C",
            },
            {
              question: "The structural formula of ethanol is:",
              options: { A: "CH3OH", B: "C2H5OH", C: "C6H5OH", D: "CH3COOH" },
              answer: "B",
            },
            {
              question: "The structural formula of methanol is:",
              options: { A: "CH3OH", B: "C2H5OH", C: "CH3CHO", D: "CH3COOH" },
              answer: "A",
            },
            {
              question: "The structural formula of phenol is:",
              options: { A: "C6H5OH", B: "C6H6", C: "C6H5CH3", D: "C6H5COOH" },
              answer: "A",
            },
            {
              question: "Which of the following is a strong acid?",
              options: { A: "CH3COOH", B: "HNO3", C: "H2CO3", D: "HF" },
              answer: "B",
            },
            {
              question: "The conjugate base of H2SO4 is:",
              options: { A: "SO4^2‚àí", B: "HSO4^‚àí", C: "H3SO4^+", D: "OH^‚àí" },
              answer: "B",
            },
            {
              question: "The product of oxidation of methanol with K2Cr2O7 is:",
              options: {
                A: "Methanal",
                B: "Methanoic acid",
                C: "Methane",
                D: "Methanol",
              },
              answer: "B",
            },
            {
              question: "The bond type in NaCl is:",
              options: {
                A: "Covalent",
                B: "Ionic",
                C: "Coordinate",
                D: "Metallic",
              },
              answer: "B",
            },
            {
              question: "The number of neutrons in C^12 is:",
              options: { A: "6", B: "7", C: "8", D: "12" },
              answer: "A",
            },
            {
              question: "Which acid is classified as weak?",
              options: { A: "HCl", B: "H2SO4", C: "CH3COOH", D: "HNO3" },
              answer: "C",
            },
            {
              question: "The functional group in phenol is:",
              options: {
                A: "‚àíOH (alcoholic)",
                B: "‚àíOH (phenolic)",
                C: "‚àíCOOH",
                D: "‚àíCHO",
              },
              answer: "B",
            },
            {
              question: "The number of moles in 32 g of O2 is:",
              options: { A: "0.5", B: "1", C: "2", D: "4" },
              answer: "B",
            },
            {
              question:
                "The hybridization of carbon in ethanol (C2H5OH) at the carbon attached to OH is:",
              options: { A: "sp3", B: "sp2", C: "sp", D: "sp3d" },
              answer: "A",
            },
            {
              question:
                "The catalyst used in the manufacture of sulfuric acid is:",
              options: {
                A: "Iron",
                B: "Vanadium pentoxide",
                C: "Nickel",
                D: "Platinum",
              },
              answer: "B",
            },
            {
              question: "The first ionization energy of elements in a period:",
              options: {
                A: "Decreases",
                B: "Increases",
                C: "Remains constant",
                D: "Varies randomly",
              },
              answer: "B",
            },
            {
              question: "The shape of CO2 molecule is:",
              options: {
                A: "Linear",
                B: "Bent",
                C: "Trigonal planar",
                D: "Tetrahedral",
              },
              answer: "A",
            },
            {
              question: "The standard enthalpy of formation is defined at:",
              options: { A: "0 K", B: "298 K", C: "373 K", D: "100 K" },
              answer: "B",
            },
            {
              question: "The molecular formula of propanol is:",
              options: { A: "C3H7OH", B: "C3H6OH", C: "C2H5OH", D: "C4H9OH" },
              answer: "A",
            },
            {
              question: "The SI unit of molality is:",
              options: { A: "mol/L", B: "mol/kg", C: "g/L", D: "g/mol" },
              answer: "B",
            },
            {
              question: "The ore of aluminum is:",
              options: {
                A: "Bauxite",
                B: "Hematite",
                C: "Sphalerite",
                D: "Malachite",
              },
              answer: "A",
            },
            {
              question: "The boiling point of a liquid increases with:",
              options: {
                A: "Decrease in pressure",
                B: "Increase in pressure",
                C: "Decrease in temperature",
                D: "Increase in volume",
              },
              answer: "B",
            },
            {
              question: "The reaction of ethanol with acetic acid produces:",
              options: {
                A: "Ethyl acetate",
                B: "Ethanal",
                C: "Ethene",
                D: "Ether",
              },
              answer: "A",
            },
            {
              question: "Synonym of ‚Äúdiligent‚Äù is:",
              options: {
                A: "Lazy",
                B: "Hardworking",
                C: "Careless",
                D: "Slow",
              },
              answer: "B",
            },
            {
              question:
                "Convert to indirect speech: He said, ‚ÄúI am studying now.‚Äù",
              options: {
                A: "He said he was studying then.",
                B: "He said he is studying now.",
                C: "He said he studied then.",
                D: "He said he will study now.",
              },
              answer: "A",
            },
            {
              question:
                "The correct preposition in ‚ÄúShe is interested ___ learning‚Äù is:",
              options: { A: "at", B: "in", C: "on", D: "with" },
              answer: "B",
            },
            {
              question: "Antonym of ‚Äúvague‚Äù is:",
              options: {
                A: "Unclear",
                B: "Precise",
                C: "Ambiguous",
                D: "Obscure",
              },
              answer: "B",
            },
            {
              question: "Choose the correct sentence:",
              options: {
                A: "They doesn‚Äôt play football.",
                B: "They don‚Äôt play football.",
                C: "They doesn‚Äôt plays football.",
                D: "They don‚Äôt plays football.",
              },
              answer: "B",
            },
            {
              question: "Synonym of ‚Äúauthentic‚Äù is:",
              options: { A: "Fake", B: "Genuine", C: "Copied", D: "False" },
              answer: "B",
            },
            {
              question: "The correct spelling is:",
              options: {
                A: "Seperate",
                B: "Separate",
                C: "Separete",
                D: "Seperete",
              },
              answer: "B",
            },
            {
              question: "Fill in the blank: ‚Äú___ sun rises in the east.‚Äù",
              options: { A: "A", B: "An", C: "The", D: "None" },
              answer: "C",
            },
            {
              question: "The passive voice of ‚ÄúShe writes a letter‚Äù is:",
              options: {
                A: "A letter is written by her.",
                B: "A letter was written by her.",
                C: "A letter is being written by her.",
                D: "A letter has been written by her.",
              },
              answer: "A",
            },
            {
              question: "Antonym of ‚Äúexpand‚Äù is:",
              options: { A: "Grow", B: "Shrink", C: "Increase", D: "Extend" },
              answer: "B",
            },
            {
              question:
                "Choose the correct word: ‚ÄúTheir house is ___ than ours.‚Äù",
              options: { A: "bigger", B: "big", C: "more big", D: "biggest" },
              answer: "A",
            },
            {
              question: "Synonym of ‚Äútranquil‚Äù is:",
              options: {
                A: "Restless",
                B: "Peaceful",
                C: "Noisy",
                D: "Chaotic",
              },
              answer: "B",
            },
            {
              question:
                "The correct form of the verb in ‚ÄúIf she ___ here, we would celebrate‚Äù is:",
              options: { A: "is", B: "was", C: "were", D: "be" },
              answer: "C",
            },
            {
              question: "The plural of ‚Äúchild‚Äù is:",
              options: { A: "Childs", B: "Children", C: "Childes", D: "Child" },
              answer: "B",
            },
            {
              question: "Choose the correct sentence:",
              options: {
                A: "Me and him are going.",
                B: "He and I are going.",
                C: "I and he are going.",
                D: "Him and me are going.",
              },
              answer: "B",
            },
            {
              question: "She ___ to dance.",
              options: { A: "likes", B: "liking", C: "liked", D: "No error" },
              answer: "A",
            },
            {
              question: "This is ___ expensive than that.",
              options: {
                A: "more expensive",
                B: "expensiver",
                C: "expensive",
                D: "No error",
              },
              answer: "A",
            },
            {
              question: "He ___ two cats.",
              options: { A: "has", B: "had", C: "having", D: "No error" },
              answer: "A",
            },
            {
              question: "The boys ___ running fast.",
              options: { A: "are", B: "was", C: "be", D: "No error" },
              answer: "A",
            },
            {
              question: "I saw the movie ___ tomorrow.",
              options: { A: "see", B: "will see", C: "seeing", D: "No error" },
              answer: "B",
            },
            {
              question: "Synonym of ‚Äúcautious‚Äù is:",
              options: { A: "Reckless", B: "Careful", C: "Bold", D: "Hasty" },
              answer: "B",
            },
            {
              question:
                "The correct preposition in ‚ÄúHe is afraid ___ heights‚Äù is:",
              options: { A: "of", B: "in", C: "at", D: "with" },
              answer: "A",
            },
            {
              question: "Antonym of ‚Äúabundant‚Äù is:",
              options: { A: "Plentiful", B: "Scarce", C: "Rich", D: "Full" },
              answer: "B",
            },
            {
              question: "Choose the correct sentence:",
              options: {
                A: "We has finished our work.",
                B: "We have finished our work.",
                C: "We having finished our work.",
                D: "We has finish our work.",
              },
              answer: "B",
            },
            {
              question: "The phrasal verb ‚Äúturn down‚Äù means:",
              options: {
                A: "To accept",
                B: "To reject",
                C: "To increase",
                D: "To continue",
              },
              answer: "B",
            },
          ];
          userAnswers = Array(questions.length).fill(null);
          displayQuestion();
        } catch (error) {
          console.error("Error loading questions:", error);
          document.getElementById("question-text").textContent =
            "Error loading questions. Please refresh.";
        }
      }

      // Display current question and options
      function displayQuestion() {
        try {
          if (
            currentQuestionIndex < 0 ||
            currentQuestionIndex >= questions.length
          ) {
            throw new Error("Invalid question index: " + currentQuestionIndex);
          }

          const question = questions[currentQuestionIndex];
          document.getElementById("question-text").textContent =
            question.question;
          const optionButtons = document.querySelectorAll(".option-btn");
          optionButtons.forEach((btn) => {
            const option = btn.dataset.option;
            btn.textContent = `${option}: ${question.options[option]}`;
            btn.disabled = false;
            btn.classList.remove("selected");
            if (userAnswers[currentQuestionIndex] === option) {
              btn.classList.add("selected");
            }
          });

          // Update navigation buttons
          document.getElementById("prev-btn").disabled =
            currentQuestionIndex === 0;
          document.getElementById("next-btn").disabled = false; // Always enabled
          document.getElementById("submit-btn").disabled = false; // Always enabled
        } catch (error) {
          console.error("Error displaying question:", error);
          document.getElementById("question-text").textContent =
            "Error displaying question. Please try again.";
        }
      }

      // Handle option click
      function handleOptionClick(event) {
        try {
          const selectedOption = event.target.dataset.option;
          const currentSelection = userAnswers[currentQuestionIndex];

          // Toggle selection: deselect if already selected, otherwise select
          if (currentSelection === selectedOption) {
            userAnswers[currentQuestionIndex] = null;
            event.target.classList.remove("selected");
          } else {
            userAnswers[currentQuestionIndex] = selectedOption;
            document.querySelectorAll(".option-btn").forEach((btn) => {
              btn.classList.remove("selected");
              if (btn.dataset.option === selectedOption) {
                btn.classList.add("selected");
              }
            });
          }

          // Update score in background
          updateScore();
        } catch (error) {
          console.error("Error handling option click:", error);
        }
      }

      // Move to next question
      function nextQuestion() {
        try {
          if (currentQuestionIndex < questions.length - 1) {
            currentQuestionIndex++;
            displayQuestion();
          } else {
            console.warn("Cannot go to next question: at the end");
          }
        } catch (error) {
          console.error("Error navigating to next question:", error);
        }
      }

      // Move to previous question
      function prevQuestion() {
        try {
          if (currentQuestionIndex > 0) {
            currentQuestionIndex--;
            displayQuestion();
          } else {
            console.warn("Cannot go to previous question: at the beginning");
          }
        } catch (error) {
          console.error("Error navigating to previous question:", error);
        }
      }

      // **Critical: Update score in background**
      function updateScore() {
        try {
          score = 0;
          userAnswers.forEach((answer, index) => {
            if (answer && answer === questions[index].answer) {
              score++;
            }
          });
          console.log("Current score:", score); // For debugging
        } catch (error) {
          console.error("Error updating score:", error);
        }
      }

      // Start timer
      function startTimer() {
        try {
          timerInterval = setInterval(() => {
            timeLeft--;
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById(
              "timer"
            ).textContent = `Time Remaining: ${minutes}:${
              seconds < 10 ? "0" : ""
            }${seconds}`;
            if (timeLeft <= 0) {
              endTest();
            }
          }, 1000);
        } catch (error) {
          console.error("Error in timer:", error);
        }
      }

      // End test and show results
      function endTest() {
        try {
          clearInterval(timerInterval);
          document.getElementById("question-box").style.display = "none";
          document.getElementById("navigation").style.display = "none";
          const resultBox = document.getElementById("result-box");
          resultBox.style.display = "block";

          // Calculate final score
          updateScore();
          const percentage = (score / questions.length) * 100;
          let feedback = "";
          let emoji = "";

          if (percentage >= 90) {
            feedback = "Best";
            emoji = "üéâ";
          } else if (percentage >= 80) {
            feedback = "Good";
            emoji = "üëç";
          } else if (percentage >= 70) {
            feedback = "Normal";
            emoji = "üôÇ";
          } else if (percentage >= 60) {
            feedback = "Average";
            emoji = "üòê";
          } else {
            feedback = "Poor";
            emoji = "üòî";
          }

          document.getElementById(
            "score-text"
          ).textContent = `Score: ${score}/${
            questions.length
          } (${percentage.toFixed(2)}%) ${emoji}`;
          document.getElementById(
            "feedback-text"
          ).textContent = `Performance: ${feedback}`;
        } catch (error) {
          console.error("Error ending test:", error);
          document.getElementById("score-text").textContent =
            "Error calculating results. Please try again.";
        }
      }

      // Event listeners
      document.addEventListener("DOMContentLoaded", () => {
        try {
          loadQuestions();
          startTimer();
          document.querySelectorAll(".option-btn").forEach((btn) => {
            btn.addEventListener("click", handleOptionClick);
          });
          document
            .getElementById("next-btn")
            .addEventListener("click", nextQuestion);
          document
            .getElementById("prev-btn")
            .addEventListener("click", prevQuestion);
          document
            .getElementById("submit-btn")
            .addEventListener("click", endTest);
        } catch (error) {
          console.error("Initialization error:", error);
          document.getElementById("question-text").textContent =
            "Error initializing quiz. Please refresh.";
        }
      });
    </script>
  </body>
</html>
